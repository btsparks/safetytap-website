---
import Base from '../layouts/Base.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog'))
  .filter(p => p.data.featured)
  .sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime())
  .slice(0, 3);
---

<Base title="SafetyTAP" description="SafetyTAP builds the hazard recognition skills your crew needs — in 30 seconds, over text, no training required. Think. Assess. Proceed.">

  <!-- Section 1: Hero -->
  <section class="relative bg-navy-deep py-28 md:py-36 overflow-hidden text-white">
    <!-- Gradient overlay -->
    <div class="absolute inset-0 bg-gradient-to-br from-navy-deep via-navy to-navy-mid opacity-100 pointer-events-none"></div>
    <!-- Teal glow accent top-right -->
    <div class="absolute -top-32 -right-32 w-[600px] h-[600px] rounded-full bg-teal/10 blur-3xl pointer-events-none"></div>
    <!-- Content -->
    <div class="relative z-10 max-w-6xl mx-auto px-6 flex flex-col md:flex-row items-center gap-12">
      <div class="flex-1 max-w-2xl">
        <h1 class="font-display text-5xl md:text-6xl lg:text-7xl font-extrabold leading-[1.05] tracking-tight">Think. Assess. Proceed.</h1>
        <p class="mt-6 text-lg md:text-xl text-white/80 leading-relaxed max-w-lg">SafetyTAP builds the hazard recognition skills your crew needs — in 30 seconds, over text, no training required.</p>
        <div class="flex gap-4 mt-8">
          <a href="#how-it-works"
             class="inline-flex items-center gap-2 bg-teal hover:bg-teal-light
                    text-white font-semibold text-base
                    px-7 py-3.5 rounded-lg
                    shadow-lg shadow-teal/20
                    transition-all duration-200 hover:shadow-xl hover:shadow-teal/30 hover:-translate-y-0.5">
            See How It Works
          </a>
          <a href="/contact"
             class="inline-flex items-center gap-2
                    border border-white/30 hover:border-white/60
                    text-white/90 hover:text-white font-medium text-base
                    px-7 py-3.5 rounded-lg
                    transition-all duration-200 hover:bg-white/5">
            Talk to Us
          </a>
        </div>
      </div>
      <div class="flex-1 max-w-sm">
        <div class="bg-navy-mid/80 backdrop-blur-sm border border-white/10 border-t-white/20 rounded-2xl shadow-2xl p-4">
          <div class="bg-dark/50 rounded-xl p-4 space-y-3">
            <div class="flex justify-end">
              <div class="bg-teal/20 text-white/90 rounded-xl rounded-br-sm px-4 py-2 text-sm max-w-[240px]">setting up scaffolding on the second floor, checking connections</div>
            </div>
            <div class="flex justify-start">
              <div class="bg-white/10 text-white/90 rounded-xl rounded-bl-sm px-4 py-2 text-sm max-w-[260px]">Connections look solid. Wind forecast for this afternoon is worth checking — standing scaffold above grade catches more lateral load than most people expect from a 15 mph gust.
              <p class="mt-2 text-white/60 text-xs">Wind loads climb fast above ground level.</p></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 2: The Problem -->
  <section class="py-16 md:py-24 bg-white" data-animate>
    <div class="max-w-3xl mx-auto px-6">
      <p class="text-sm font-semibold tracking-widest uppercase text-teal mb-3">The Problem</p>
      <h2 class="font-display text-3xl md:text-4xl font-bold text-navy leading-tight tracking-tight">Your safety program creates compliance. It doesn't create competence.</h2>
      <div class="mt-8 space-y-4 text-lg text-dark/80 leading-relaxed">
        <p>Your crew fills out JHAs because they have to. They sit through toolbox talks because it's on the schedule. They check the boxes on the observation card because someone's counting. And none of it changes how they actually see hazards when they're standing in front of the task.</p>
        <p>The problem isn't the people. It's that every tool in the safety industry — BBS programs, observation platforms, digital checklists — was designed to document compliance, not develop competence. They assume the worker already knows what to look for. Most of the time, that assumption is wrong.</p>
        <p>It's not that your program is bad. It's that the problem is deeper than any program can reach.</p>
      </div>
    </div>
  </section>

  <!-- Section 3: The Insight -->
  <section class="py-16 md:py-24 bg-teal-pale" data-animate>
    <div class="max-w-3xl mx-auto px-6">
      <p class="text-sm font-semibold tracking-widest uppercase text-teal mb-3">Our Approach</p>
      <h2 class="font-display text-3xl md:text-4xl font-bold text-navy leading-tight tracking-tight">Hazard recognition isn't a checklist. It's a skill.</h2>
      <div class="mt-8 space-y-4 text-lg text-dark/80 leading-relaxed">
        <p>Experienced workers develop what the industry calls "the eye" — the ability to walk onto a site and immediately see what's off. It's not magic. It's pattern recognition built through years of exposure, near-misses, and mentoring from people who've been around long enough to know what matters.</p>
        <p>SafetyTAP accelerates that process. Like scaffolding on a building — you erect it to support the work, and you take it down when the structure can stand on its own.</p>
      </div>
      <blockquote class="relative pl-8 py-2 my-8 border-l-4 border-teal">
        <span class="absolute -left-1 -top-3 text-5xl text-teal/20 font-serif leading-none select-none">"</span>
        <p class="text-lg md:text-xl italic font-medium text-navy leading-relaxed">A worker who stops using SafetyTAP because they no longer need it is our greatest success.</p>
      </blockquote>
    </div>
  </section>

  <!-- Section 4: How It Works -->
  <section id="how-it-works" class="py-16 md:py-24 bg-white" data-animate>
    <div class="max-w-5xl mx-auto px-6">
      <p class="text-sm font-semibold tracking-widest uppercase text-teal mb-3 text-center">How It Works</p>
      <h2 class="font-display text-3xl md:text-4xl font-bold text-navy text-center leading-tight tracking-tight">30 seconds. One text. Zero friction.</h2>
      <div class="mt-12 grid md:grid-cols-3 gap-8">
        <div class="text-center">
          <div class="w-12 h-12 rounded-full bg-teal/10 border-2 border-teal/30 flex items-center justify-center mx-auto text-teal font-bold font-display text-lg">
            1
          </div>
          <h3 class="text-lg font-semibold leading-snug text-navy mt-4">Take a photo</h3>
          <p class="text-dark/70 mt-2 text-base leading-relaxed">Worker snaps a photo of their task or work area. Takes 5 seconds.</p>
        </div>
        <div class="text-center">
          <div class="w-12 h-12 rounded-full bg-teal/10 border-2 border-teal/30 flex items-center justify-center mx-auto text-teal font-bold font-display text-lg">
            2
          </div>
          <h3 class="text-lg font-semibold leading-snug text-navy mt-4">Send it to SafetyTAP</h3>
          <p class="text-dark/70 mt-2 text-base leading-relaxed">Text the photo to the SafetyTAP bot on Telegram. No app to download, no account to create.</p>
        </div>
        <div class="text-center">
          <div class="w-12 h-12 rounded-full bg-teal/10 border-2 border-teal/30 flex items-center justify-center mx-auto text-teal font-bold font-display text-lg">
            3
          </div>
          <h3 class="text-lg font-semibold leading-snug text-navy mt-4">Get a specific insight</h3>
          <p class="text-dark/70 mt-2 text-base leading-relaxed">A brief, expert-level observation about something in the photo they probably haven't considered.</p>
        </div>
      </div>
      <p class="text-center text-dark/60 mt-8 text-base leading-relaxed">No app to download. No account to create. No training required. Just text the number.</p>
    </div>
  </section>

  <!-- Section 5: The Science -->
  <section class="py-16 md:py-24 bg-light" data-animate>
    <div class="max-w-5xl mx-auto px-6">
      <p class="text-sm font-semibold tracking-widest uppercase text-teal mb-3 text-center">The Science</p>
      <h2 class="font-display text-3xl md:text-4xl font-bold text-navy text-center leading-tight tracking-tight">Built on research, not assumptions.</h2>
      <div class="mt-12 grid md:grid-cols-2 gap-8">
        <div class="bg-white border border-gray-100 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200 group border-l-4 border-l-transparent hover:border-l-teal">
          <h3 class="text-base font-semibold text-navy mb-2 group-hover:text-teal transition-colors">Inattentional Blindness</h3>
          <p class="text-sm text-dark/70 leading-relaxed">Workers focused on their task literally cannot see hazards outside their focus area — the brain filters them out.</p>
        </div>
        <div class="bg-white border border-gray-100 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200 group border-l-4 border-l-transparent hover:border-l-teal">
          <h3 class="text-base font-semibold text-navy mb-2 group-hover:text-teal transition-colors">Self-Efficacy</h3>
          <p class="text-sm text-dark/70 leading-relaxed">Workers who believe their actions can prevent incidents engage in more proactive safety behavior. Confidence drives competence.</p>
        </div>
        <div class="bg-white border border-gray-100 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200 group border-l-4 border-l-transparent hover:border-l-teal">
          <h3 class="text-base font-semibold text-navy mb-2 group-hover:text-teal transition-colors">Normalcy Bias</h3>
          <p class="text-sm text-dark/70 leading-relaxed">When unsafe conditions persist without incident, the brain reclassifies them as normal. "We've always done it this way" is the result.</p>
        </div>
        <div class="bg-white border border-gray-100 rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow duration-200 group border-l-4 border-l-transparent hover:border-l-teal">
          <h3 class="text-base font-semibold text-navy mb-2 group-hover:text-teal transition-colors">Bystander Effect</h3>
          <p class="text-sm text-dark/70 leading-relaxed">The larger the crew, the less likely anyone is to speak up about a concern. SafetyTAP is a private channel that removes the social cost.</p>
        </div>
      </div>
      <p class="text-center mt-8">
        <a href="/blog" class="text-teal hover:text-teal-light font-medium underline-offset-2 hover:underline transition-colors">Explore the research on our blog</a>
      </p>
    </div>
  </section>

  <!-- Section 6: What Makes It Different -->
  <section class="py-16 md:py-24 bg-white" data-animate>
    <div class="max-w-3xl mx-auto px-6">
      <p class="text-sm font-semibold tracking-widest uppercase text-teal mb-3">What's Different</p>
      <h2 class="font-display text-3xl md:text-4xl font-bold text-navy leading-tight tracking-tight">Not another program. A practice.</h2>
      <div class="mt-8 space-y-4 text-lg text-dark/80 leading-relaxed">
        <p>Every safety technology on the market does one of two things: it automates compliance documentation, or it provides a digital checklist. SafetyTAP does neither.</p>
        <p>Observation platforms assume the worker already knows what to look for. Training platforms deliver content disconnected from the task. Wearables monitor the environment on the worker's behalf — zero cognitive development.</p>
        <p>SafetyTAP is the only tool that operates at the individual cognitive level, at the point of task, with zero friction. The output isn't a report or a compliance record. The output is a worker who's better at their job tomorrow than they were today.</p>
      </div>
    </div>
  </section>

  <!-- Section 7: For Safety Managers -->
  <section class="relative py-24 md:py-32 text-white overflow-hidden">
    <!-- Gradient background -->
    <div class="absolute inset-0 bg-gradient-to-br from-navy-deep via-navy to-navy-mid pointer-events-none"></div>
    <div class="relative z-10 max-w-3xl mx-auto px-6">
      <p class="text-sm font-semibold tracking-widest uppercase text-teal mb-3">Get Started</p>
      <h2 class="font-display text-3xl md:text-4xl font-bold leading-tight tracking-tight">Give your crew a tool they'll actually use.</h2>
      <div class="mt-8 space-y-4 text-lg text-white/80 leading-relaxed">
        <p>Your people aren't going to fill out another form. They're not going to download another app. They're not going to sit through another training module and pretend to pay attention.</p>
        <p>But they will text a photo — because it takes 10 seconds and it gives them something useful back. Something specific. Something that makes them better at what they do.</p>
        <p>SafetyTAP gives you a leading indicator that actually leads. Not "observations completed," but actual cognitive development in the people doing the work.</p>
      </div>
      <div class="mt-8">
        <a href="/contact"
           class="inline-flex items-center gap-2 bg-teal hover:bg-teal-light
                  text-white font-semibold text-base
                  px-7 py-3.5 rounded-lg
                  shadow-lg shadow-teal/20
                  transition-all duration-200 hover:shadow-xl hover:shadow-teal/30 hover:-translate-y-0.5">
          Let's Talk
        </a>
      </div>
    </div>
  </section>

  <!-- Section 8: Blog Preview -->
  {posts.length > 0 && (
    <section class="py-16 md:py-24 bg-light" data-animate>
      <div class="max-w-5xl mx-auto px-6">
        <p class="text-sm font-semibold tracking-widest uppercase text-teal mb-3 text-center">From the Blog</p>
        <h2 class="font-display text-3xl md:text-4xl font-bold text-navy text-center leading-tight tracking-tight">The Science of Seeing</h2>
        <p class="text-center text-dark/60 mt-2 text-base leading-relaxed">Research-backed insights on how workers develop hazard recognition</p>
        <div class="mt-12 grid md:grid-cols-3 gap-8">
          {posts.map((post) => (
            <a href={`/blog/${post.slug}`} class="group bg-white border border-gray-100 rounded-xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-1">
              <div class="h-1 bg-gradient-to-r from-teal to-teal-light"></div>
              <div class="p-6">
                <h3 class="text-base font-semibold text-navy group-hover:text-teal transition-colors">{post.data.title}</h3>
                <p class="text-dark/60 text-sm mt-2 leading-relaxed">{post.data.description}</p>
                <p class="text-teal text-sm mt-4 font-medium">{post.data.readTime} read</p>
              </div>
            </a>
          ))}
        </div>
        <p class="text-center mt-8">
          <a href="/blog" class="text-teal hover:text-teal-light font-medium underline-offset-2 hover:underline transition-colors">View all posts</a>
        </p>
      </div>
    </section>
  )}

</Base>

<script>
  // Scroll-triggered fade-in animations
  const observer = new IntersectionObserver(
    (entries) => entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.classList.add('opacity-100', 'translate-y-0');
        e.target.classList.remove('opacity-0', 'translate-y-4');
      }
    }),
    { threshold: 0.1 }
  );
  document.querySelectorAll('[data-animate]').forEach(el => {
    el.classList.add('opacity-0', 'translate-y-4', 'transition-all', 'duration-700', 'ease-out');
    observer.observe(el);
  });
</script>
